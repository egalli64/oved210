SET SERVEROUTPUT ON


SELECT *
FROM CODERS;


DECLARE
    V_FIRST_NAME CODERS.FIRST_NAME%TYPE;
    V_LAST_NAME CODERS.LAST_NAME%TYPE;
    
BEGIN
  SELECT FIRST_NAME, LAST_NAME
  INTO V_FIRST_NAME, V_LAST_NAME
  FROM CODERS
  WHERE CODER_ID = 103;
  
  DBMS_OUTPUT.PUT_LINE('CODER 103 is '|| V_FIRST_NAME || ' ' || V_LAST_NAME);
 
END;


DECLARE
    V_FIRST_NAME CODERS.FIRST_NAME%TYPE;
    V_LAST_NAME CODERS.LAST_NAME%TYPE;
    V_CODER_ID CODERS.CODER_ID%TYPE;
    CURSOR V_CODER_CURSOR IS 
        SELECT CODER_ID, FIRST_NAME, LAST_NAME
        FROM CODERS
        ORDER BY LAST_NAME;
BEGIN
  OPEN V_CODER_CURSOR; --ESEGUI LA SELECT
  
  LOOP
      FETCH V_CODER_CURSOR   --leggimi il prossimo elemento nel cursore
      INTO V_CODER_ID, V_FIRST_NAME,V_LAST_NAME;
      EXIT WHEN V_CODER_CURSOR%NOTFOUND; --quando notfound è true, so che non ho niente da vedere in più e quindi esco dal loop
      DBMS_OUTPUT.PUT_LINE('CODER  '|| V_CODER_ID|| ' is ' ||v_first_name||' '||v_last_name);
      
  END LOOP;
  END;
 / 
 
 --IMPLICIT FETCH CURSOR
 DECLARE
    V_FIRST_NAME CODERS.FIRST_NAME%TYPE;
    V_LAST_NAME CODERS.LAST_NAME%TYPE;
    V_CODER_ID CODERS.CODER_ID%TYPE;
    CURSOR V_CODER_CURSOR IS 
        SELECT CODER_ID, FIRST_NAME, LAST_NAME
        FROM CODERS
        ORDER BY LAST_NAME;
BEGIN
  FOR V_CUR IN V_CODER_CURSOR LOOP
  DBMS_OUTPUT.PUT_LINE('CODER  '|| V_CUR.CODER_ID|| ' is ' ||V_CUR.first_name||' '||V_CUR.last_name);
  END LOOP;
  
END;
/
  DECLARE
  TYPE T_CODER_CURSOR IS REF CURSOR RETURN CODERS%ROWTYPE;
  V_CODER_CURSOR T_CODER_CURSOR;
  V_CUR CODERS%ROWTYPE;
  
BEGIN
  OPEN V_CODER_CURSOR FOR SELECT * FROM CODERS WHERE CODER_ID BETWEEN 103 AND 105;
  
  LOOP
  
  FETCH V_CODER_CURSOR INTO V_CUR;
  EXIT WHEN V_CODER_CURSOR%NOTFOUND;
  
     DBMS_OUTPUT.PUT_LINE('CODER  '|| V_CUR.CODER_ID|| ' is ' ||V_CUR.first_name||' '||V_CUR.last_name);
  
  END LOOP;
END;
/


